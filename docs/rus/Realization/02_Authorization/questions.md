# Вопросы: Этап 2 Авторизация

| ID | Категория | Вопрос | Статус | Ответ |
|----|-----------|--------|--------|-------|
| AQ1 | Scope | Нужны ли сразу CRM webhooks или позже? | closed | Отложить до готовности маппинга CRM (регистрируем после подтверждения объёмов и лимитов). |
|  |  | Пример: Если CRM объём >100k записей и маппинг ещё не готов, выгодно ли отложить регистрацию пока не подтвердим лимиты? | note | Да, откладываем (снижаем шум и расход лимита). |
| AQ2 | Security | Нужен ли IP allow-list на старте? | closed | Нет на раннем dev; добавить перед продуктивной массовой выгрузкой. |
|  |  | Пример: начальный этап dev через публичные IP Azure без списка — риск утечки webhook. Нужно ли временно ограничить по стране / VPN? | note | Примем риск, позже включим allow-list/VPN. |
| AQ3 | Retry | Максимум попыток при регистрации? | closed | 5 попыток (0.5s,1s,2s,4s,8s) с экспоненциальным backoff + jitter. |
|  |  | Пример: 3 попытки (1s,2s,4s) vs 5 попыток (0.5,1,2,4,8). Выбор влияет на время прогрева среды. | note | Выбрано 5: устойчивость важнее + малая задержка. |
| AQ4 | Timestamps | API возвращает локальное время? | closed | Да, возможны локальные без offset; сохраняем raw string + вычисленный UTC + offsetSource. |
|  |  | Пример: user.get может вернуть `LAST_LOGIN` без offset. Нужно ли хранить исходную строку + inferred timezone Europe/Warsaw. | note | Да: поля rawTimestamp, parsedUtc, originalOffsetMinutes. |
| AQ5 | Dev | Нужно ли seedить test data для on-prem? | closed | Нет: используем реальный ограниченный subset из Cloud (через test_limit). |
|  |  | Пример: создать 5 тестовых пользователей и 3 задачи для smoke импортов или сразу использовать реальные данные Cloud subset. | note | Берём первые N реальных записей (users/tasks) для smoke. |

History:
- scaffold
- decisions applied (authorization scope finalized)
