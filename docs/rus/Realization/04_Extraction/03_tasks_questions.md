# Вопросы: 4.3 Tasks

Примечание (simplified model): single-pass без дельты/повторных обновлений. Сложных статусов/расширенных ретраев не добавляем; принятые решения не требуют корректировок.

| ID | Категория | Вопрос | Статус | Решение |
|----|-----------|--------|--------|---------|
| TQ1 | История | Нужен ли перенос change log? | closed | C: Только статусы + reassignment (сжатый лог). |
|  |  | Пример: История статусов (NEW->IN_PROGRESS->DONE) сохраняется как отдельные события или фиксируем только финальное состояние? | note |  |
| TQ2 | Поля | Нормализовать кастомные поля? | closed | A: Raw перенос + auto-create недостающих полей. |
|  |  | Пример: Кастомное поле UF_TASK_COLOR переводить в TARGET_COLOR (набор допустимых значений) или переносить raw? | note |  |
| TQ3 | CRM | Мигрировать связи задач с лидами/CRM? | closed | A: Strict dependency – ждём импорт связанных CRM сущностей. |
|  |  | Пример: Связь задача->deal ID=4512: если deal ещё не импортирован, откладываем задачу (dependency queue) или импорт без связи и последующее обновление? | note |  |
| TQ4 | Архив | Конвертировать закрытые задачи в архив? | closed | A: 1:1 статусы без дополнительного архивирования. |
|  |  | Пример: Closed задачи со статусом COMPLETED помечать ArchiveFlag=true или перемещать в отдельный проект Archive? | note |  |
| TQ5 | Просроченные | Как импортировать expired задачи? | closed | A: Перенос оригинального DEADLINE без пересчёта. |
|  |  | Пример: Просроченная задача (deadline < now) сохраняет оригинальный deadline или пересчитываем timezone? | note |  |
| TQ6 | Приоритет | Сохраняем ли оригинальные приоритеты? | closed | A: Оригинальный приоритет + auto-create отсутствующих значений. |
|  |  | Пример: PRIORITY=2 (High) в Cloud -> сопоставить с High enum on-prem или numeric сохранение? | note |  |

## Решения и последствия
TQ1 (C): Меньше объёма, сохраняем SLA по статусам; нельзя анализировать изменения описаний/минорных полей.
TQ2 (A): Простота и полнота; рост схемы – нужна периодическая проверка количества auto-created полей.
TQ3 (A): Гарантированная целостность ссылок; возможные очереди ожидания (metrics: tasks.crm.link_waiting).
TQ4 (A): Быстрый импорт; потенциально много завершённых задач в обычных списках – UI фильтрация.
TQ5 (A): Историческая точность; отчёты сразу показывают просрочки – возможно добавить ExpiredFlag для фильтра.
TQ6 (A): Полная сохранность приоритетов; расширение набора enum может потребовать UI адаптации.

History:
- scaffold
- decisions applied (TQ1=C,TQ2=A,TQ3=A,TQ4=A,TQ5=A,TQ6=A)
